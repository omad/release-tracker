<!DOCTYPE html>
<html>
<head>
    <title>Open Data Cube Release Tracker</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            color: #333;
            max-width: 960px;
            margin: 20px auto;
            padding: 0 20px;
            background-color: #f9f9f9;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden; /* Ensures border-radius applies to children */
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: top; /* Align content to top */
            position: relative; /* Allow better pre-release positioning */
        }
        th {
            background-color: #e9ecef;
            color: #495057;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            position: relative;
            white-space: nowrap; /* Prevent header text from wrapping */
        }
        th:hover {
            background-color: #dee2e6;
        }
        th.sort-asc::after {
            content: " ▲";
            position: absolute;
            right: 10px;
            font-size: 0.8em;
        }
        th.sort-desc::after {
            content: " ▼";
            position: absolute;
            right: 10px;
            font-size: 0.8em;
        }
        tbody tr:nth-child(even) {
            background-color: #f6f6f6;
        }
        tbody tr:hover {
            background-color: #eef;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .prerelease {
            font-style: italic;
            color: #6c757d;
            font-size: 0.85em;
            display: block; /* Ensures it's on a new line */
            margin-top: -10px;
            position: relative;
            bottom: 0;
            padding-top: 10px;
        }
        .age-display {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align age info to left */
        }
        .age-display .date {
            font-size: 0.85em;
            color: #6c757d;
            margin-top: 2px;
        }
        /* Specific column widths to prevent wrapping and improve layout */
        #release-table th:nth-child(1), #release-table td:nth-child(1) { /* Package Name */
            min-width: 150px;
        }
        #release-table th:nth-child(2), #release-table td:nth-child(2) { /* PyPI Version */
            min-width: 100px;
        }
        #release-table th:nth-child(3), #release-table td:nth-child(3) { /* PyPI Age */
            min-width: 180px;
        }
        #release-table th:nth-child(4), #release-table td:nth-child(4) { /* GitHub Version */
            min-width: 100px;
        }
        #release-table th:nth-child(5), #release-table td:nth-child(5) { /* GitHub Age */
            min-width: 180px;
        }
        /* Ensure version cells stack correctly */
        td:nth-child(2) > a, td:nth-child(4) > a {
            display: block;
        }
        td:nth-child(2) .prerelease, td:nth-child(4) .prerelease {
            margin-top: 11px; /* Add some space between stable and prerelease */
        }
    </style>
</head>
<body>
    <h1>Open Data Cube Release Tracker</h1>
    <table id="release-table">
        <thead>
            <tr>
                <th data-sort="name">Package Name</th>
                <th data-sort="pypi_stable_version">PyPI Version</th>
                <th data-sort="pypi_stable_age_days">PyPI Age (days)</th>
                <th data-sort="github_stable_version">GitHub Version</th>
                <th data-sort="github_stable_age_days">GitHub Age (days)</th>
            </tr>
        </thead>
        <tbody>
            
            <tr data-original-index="0">
                <td><a href="https://pypi.org/project/datacube">datacube-core</a></td>
                <td>
                    <a href="https://pypi.org/project/datacube/1.9.7/">1.9.7</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>2 days ago</span>
                            <span class="date">(05 August 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/datacube-core/releases/tag/1.9.7">1.9.7</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>2 days ago</span>
                            <span class="date">(05 August 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="1">
                <td><a href="https://pypi.org/project/odc-stac">odc-stac</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-stac/0.4.0/">0.4.0</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>97 days ago</span>
                            <span class="date">(01 May 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-stac/releases/tag/v0.4.0">v0.4.0</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>97 days ago</span>
                            <span class="date">(01 May 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="2">
                <td><a href="https://pypi.org/project/odc-stats">odc-stats</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-stats/1.9.2/">1.9.2</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>22 days ago</span>
                            <span class="date">(16 July 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-stats">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="3">
                <td><a href="https://pypi.org/project/odc-geo">odc-geo</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-geo/0.4.10/">0.4.10</a>
                    
                        <span class="prerelease">
                            <a href="https://pypi.org/project/odc-geo/0.5.0rc1/">0.5.0rc1</a>
                        </span>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>157 days ago</span>
                            <span class="date">(03 March 2025)</span>
                        
                        
                            <span class="prerelease">
                                <span>(98 days ago)</span>
                            </span>
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-geo/releases/tag/v0.4.10">v0.4.10</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>157 days ago</span>
                            <span class="date">(03 March 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="4">
                <td><a href="https://pypi.org/project/odc-algo">odc-algo</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-algo/1.0.1/">1.0.1</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>51 days ago</span>
                            <span class="date">(17 June 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-algo/releases/tag/1.0.1">1.0.1</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>51 days ago</span>
                            <span class="date">(17 June 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="5">
                <td><a href="https://pypi.org/project/datacube-alchemist">datacube-alchemist</a></td>
                <td>
                    <a href="https://pypi.org/project/datacube-alchemist/0.6.7/">0.6.7</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>705 days ago</span>
                            <span class="date">(01 September 2023)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/datacube-alchemist/releases/tag/0.6.7">0.6.7</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>705 days ago</span>
                            <span class="date">(01 September 2023)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="6">
                <td><a href="https://pypi.org/project/datacube-ows">datacube-ows</a></td>
                <td>
                    <a href="https://pypi.org/project/datacube-ows/1.9.3/">1.9.3</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>26 days ago</span>
                            <span class="date">(11 July 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/datacube-ows/releases/tag/1.9.3">1.9.3</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>27 days ago</span>
                            <span class="date">(11 July 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="7">
                <td><a href="https://pypi.org/project/datacube-explorer">datacube-explorer</a></td>
                <td>
                    <a href="https://pypi.org/project/datacube-explorer/2.12.4/">2.12.4</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>254 days ago</span>
                            <span class="date">(25 November 2024)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/datacube-explorer/releases/tag/3.0.0">3.0.0</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>227 days ago</span>
                            <span class="date">(23 December 2024)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="8">
                <td><a href="https://pypi.org/project/odc-loader">odc-loader</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-loader/0.5.1/">0.5.1</a>
                    
                        <span class="prerelease">
                            <a href="https://pypi.org/project/odc-loader/0.6.0rc3/">0.6.0rc3</a>
                        </span>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>126 days ago</span>
                            <span class="date">(03 April 2025)</span>
                        
                        
                            <span class="prerelease">
                                <span>(9 days ago)</span>
                            </span>
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-loader/releases/tag/v0.5.1">v0.5.1</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>126 days ago</span>
                            <span class="date">(03 April 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="9">
                <td><a href="https://pypi.org/project/odc-dscache">odc-dscache</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-dscache/1.9.1/">1.9.1</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>28 days ago</span>
                            <span class="date">(10 July 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-dscache">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="10">
                <td><a href="https://pypi.org/project/eodatasets3">eo-datasets</a></td>
                <td>
                    <a href="https://pypi.org/project/eodatasets3/1.9.3/">1.9.3</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>78 days ago</span>
                            <span class="date">(20 May 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/eo-datasets/releases/tag/eodatasets3-1.9.3">eodatasets3-1.9.3</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>78 days ago</span>
                            <span class="date">(20 May 2025)</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="11">
                <td><a href="https://pypi.org/project/odc-io">odc-io</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-io/0.2.2/">0.2.2</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>631 days ago</span>
                            <span class="date">(15 November 2023)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-tools">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="12">
                <td><a href="https://pypi.org/project/odc-cloud">odc-cloud</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-cloud/0.2.5/">0.2.5</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>568 days ago</span>
                            <span class="date">(17 January 2024)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-tools">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="13">
                <td><a href="https://pypi.org/project/odc-ui">odc-ui</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-ui/0.2.1/">0.2.1</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>631 days ago</span>
                            <span class="date">(15 November 2023)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-tools">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="14">
                <td><a href="https://pypi.org/project/odc-apps-cloud">odc-apps-cloud</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-apps-cloud/0.2.3/">0.2.3</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>631 days ago</span>
                            <span class="date">(15 November 2023)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-tools">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
            <tr data-original-index="15">
                <td><a href="https://pypi.org/project/odc-apps-dc-tools">odc-apps-dc-tools</a></td>
                <td>
                    <a href="https://pypi.org/project/odc-apps-dc-tools/1.9.3/">1.9.3</a>
                    
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>22 days ago</span>
                            <span class="date">(16 July 2025)</span>
                        
                        
                    </div>
                </td>
                <td>
                    <a href="https://github.com/opendatacube/odc-tools">N/A</a>
                </td>
                <td>
                    <div class="age-display">
                        
                            <span>N/A</span>
                        
                    </div>
                </td>
            </tr>
            
        </tbody>
    </table>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const table = document.getElementById("release-table");
            const headers = table.querySelectorAll("th");
            const tbody = table.querySelector("tbody");
            const initialRows = Array.from(tbody.querySelectorAll("tr")); // Store initial order

            let currentSortColumn = null;
            let currentSortOrder = "none"; // "none", "asc", "desc"

            headers.forEach(header => {
                header.addEventListener("click", () => {
                    const sortKey = header.dataset.sort;
                    let newSortOrder;

                    if (currentSortColumn === header) {
                        if (currentSortOrder === "asc") {
                            newSortOrder = "desc";
                        } else if (currentSortOrder === "desc") {
                            newSortOrder = "none"; // Third click, revert to original
                        } else {
                            newSortOrder = "asc"; // Revert from original, start asc
                        }
                    } else {
                        newSortOrder = "asc"; // New column, start asc
                        currentSortColumn = header;
                    }

                    // Clear all sort indicators
                    headers.forEach(h => h.classList.remove("sort-asc", "sort-desc"));

                    if (newSortOrder !== "none") {
                        header.classList.add(newSortOrder === "asc" ? "sort-asc" : "sort-desc");
                    }
                    currentSortOrder = newSortOrder;

                    let rows = Array.from(tbody.querySelectorAll("tr"));

                    if (currentSortOrder === "none") {
                        rows.sort((a, b) => parseInt(a.dataset.originalIndex) - parseInt(b.dataset.originalIndex));
                    } else {
                        rows.sort((a, b) => {
                            const aCell = a.querySelector(`td:nth-child(${getColumnIndex(header)})`);
                            const bCell = b.querySelector(`td:nth-child(${getColumnIndex(header)})`);

                            let aValue = aCell.textContent.trim();
                            let bValue = bCell.textContent.trim();

                            // Extract numeric value for age columns
                            if (sortKey.includes("_age_days")) {
                                aValue = parseFloat(aValue.split(" ")[0]) || 0; // "22 days ago" -> 22
                                bValue = parseFloat(bValue.split(" ")[0]) || 0; // "N/A" -> 0
                            }

                            if (typeof aValue === 'number' && typeof bValue === 'number') {
                                return currentSortOrder === "asc" ? aValue - bValue : bValue - aValue;
                            } else {
                                return currentSortOrder === "asc" ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);
                            }
                        });
                    }

                    rows.forEach(row => tbody.appendChild(row));
                });
            });

            function getColumnIndex(header) {
                let index = 0;
                let current = header;
                while (current = current.previousElementSibling) {
                    index++;
                }
                return index + 1;
            }
        });
    </script>
  <div id="last-checked-info" style="text-align: center; margin-top: 20px; font-size: 0.8em; color: #888;"></div>

  <script>
    async function getLastWorkflowRun() {
      const owner = 'omad'; // Assuming 'odc' is the owner based on the path
      const repo = 'release-tracker';
      const workflowFileName = 'update.yml';
      const url = `https://api.github.com/repos/${owner}/${repo}/actions/workflows/${workflowFileName}/runs`;

      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`GitHub API error: ${response.statusText}`);
        }
        const data = await response.json();
        if (data.workflow_runs && data.workflow_runs.length > 0) {
          const lastRun = data.workflow_runs[0];
          const lastCheckedDate = new Date(lastRun.created_at);
          document.getElementById('last-checked-info').innerText = `Last checked: ${lastCheckedDate.toLocaleString()}`;
        } else {
          document.getElementById('last-checked-info').innerText = 'Last checked: N/A (No workflow runs found)';
        }
      } catch (error) {
        console.error('Error fetching workflow run:', error);
        document.getElementById('last-checked-info').innerText = `Last checked: Error (${error.message})`;
      }
    }

    getLastWorkflowRun();
  </script>
</body>
</html>